new WOW({animateClass:"animate__animated"}).init();const portfolioBtn=$(".portfolio__btn"),modalGallery=$("#modal-gallery"),modalGalleryTitle=$(".modal-gallery__title .title"),modalGalleryPreview=$(".preview-swiper"),modalGalleryClose=$("#gallery-close"),modalGalleryShowMore=$(".modal-gallery__link"),links=$(".menu__link, .features__action a, .main__actions a"),callBackBtn=$("#callback"),modalCallBack=$("#modal-callback"),modalCallBackClose=$("#callback-close"),modalCallBackConfirmLink=$(".form__confirm-link"),InputPhone=$('input[type="tel"]'),swiper=new Swiper(".portfolio-swiper",{slidesPerView:1,spaceBetween:25,loop:!0,watchSlidesProgress:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1200:{slidesPerView:3},768:{slidesPerView:2}}}),swiperModalPreview=new Swiper(".preview-swiper",{slidesPerView:2,spaceBetween:2,loop:!0,navigation:{nextEl:".modal-swiper-button-next",prevEl:".modal-swiper-button-prev"},breakpoints:{768:{slidesPerView:5,spaceBetween:10},460:{slidesPerView:3,spaceBetween:10}}}),swiperModal=new Swiper(".modal-swiper",{slidesPerView:1,spaceBetween:50,loop:!0,pagination:{el:".modal-swiper-pagination",type:"fraction"},navigation:{nextEl:".modal-swiper-button-next",prevEl:".modal-swiper-button-prev"},breakpoints:{1200:{slidesPerView:3,spaceBetween:90},768:{slidesPerView:2}},on:{transitionEnd:function(){let e=this.slides,i=swiperModalPreview.slides,a;e.each(e=>{window.matchMedia("(min-width: 769px)").matches?e.classList.contains("swiper-slide-next")&&(a=$(e).attr("data-swiper-slide-index")):e.classList.contains("swiper-slide-active")&&(a=$(e).attr("data-swiper-slide-index"))}),i.each(e=>{$(e).attr("data-swiper-slide-index")===a?$(e).addClass("active"):$(e).removeClass("active")})}}}),swiperReviewsText=(modalGalleryPreview.on("click",".modal-swiper-pagination-img",function(){var e=$(this).parents(".swiper-slide").attr("data-swiper-slide-index");window.matchMedia("(min-width: 1201px)").matches?swiperModal.slideTo(+e+2):swiperModal.slideTo(+e+1)}),new Swiper(".reviews_text_swiper",{slidesPerView:1,loop:!0,allowTouchMove:!1,navigation:{nextEl:".reviews-swiper-button-next",prevEl:".reviews-swiper-button-prev"}})),swiperReviews=new Swiper(".reviews_swiper",{slidesPerView:1,loop:!0,pagination:{el:".reviews-swiper-pagination",type:"fraction"},navigation:{nextEl:".reviews-swiper-button-next",prevEl:".reviews-swiper-button-prev"},on:{slideChange:function(){swiperReviewsText.slideTo(this.activeIndex)}}}),forms=(portfolioBtn.click(function(){modalGalleryTitle.text($(this).text()),modalGallery.addClass("modal__open")}),modalGalleryClose.click(()=>{modalGallery.removeClass("modal__open")}),modalGalleryShowMore.click(()=>{modalGallery.removeClass("modal__open")}),callBackBtn.click(function(){modalCallBack.addClass("modal__open")}),modalCallBackClose.click(()=>{modalCallBack.removeClass("modal__open")}),modalCallBackConfirmLink.click(()=>{modalCallBack.removeClass("modal__open")}),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.747879129065446,37.55301155970908],zoom:15,controls:[]}),i=ymaps.templateLayoutFactory.createClass('<div class="map__address">$[properties.iconContent]</div>'),i=new ymaps.Placemark([55.74817856898701,37.54024549999995],{iconContent:"Пресненская наб., 6, стр. 2"},{iconLayout:"default#imageWithContent",iconImageHref:"./images/pin.png",iconImageSize:[36,50],iconImageOffset:[4,-10],iconContentOffset:[45,15],iconContentLayout:i});e.geoObjects.add(i)}),links.click(function(e){e.preventDefault();e=$(this).attr("href");$("html").animate({scrollTop:$(e).offset().top},{easing:"linear"})}),InputPhone.mask("+ 7 (000) 000 - 00 - 00"),$("form"));let hasError=!1;function addError(e){e.next().show(),e.addClass("input_error"),hasError=!0}forms.each(function(e){$(this).submit(function(e){e.preventDefault();let i=$(this),a=$(this).next(),l,t;i.find(".error").hide(),hasError=!1;e=i.find(".form__input");$.each(e,(e,i)=>{$(i).val()?$(i).removeClass("input_error"):addError($(i)),"text"===$(i).attr("type")?l=$(i).val():t=$(i).val()}),hasError||$.ajax({method:"POST",url:"https://testologia.site/checkout",data:{name:l,phone:t}}).done(function(e){e.success?(i.hide(),a.show()):alert("Возникла ошибка при оформлении заявки, позвоните нам по номеру, указанному в контактах")})})});const burgerButton=$("#burger"),mobileMenu=$("#menu"),menuList=$(".menu__link"),menuClose=$("#menu-close"),textReview=(burgerButton.click(()=>{mobileMenu.addClass("open")}),menuClose.click(()=>{mobileMenu.removeClass("open")}),menuList.click(()=>{mobileMenu.removeClass("open")}),document.querySelectorAll(".review__text"));window.matchMedia("(max-width: 1023px)").matches&&textReview.forEach(i=>{const a=new Dotdotdot(i,{ellipsis:"...",wrap:"word",keep:".more",height:280,lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]}}).API;$(".more__link").click(function(e){e.preventDefault(),i.matches(".ddd-truncated")?(a.restore(),i.classList.add("full-review")):(i.classList.remove("full-review"),a.truncate(),a.watch())})});